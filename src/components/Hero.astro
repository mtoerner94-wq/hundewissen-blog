---
// Hero section for Hundewissen mit Kopf homepage
---

<section class="relative min-h-[85vh] flex items-center overflow-hidden bg-gradient-to-b from-amber-50 via-secondary to-white">
  <!-- Decorative Blur Blobs -->
  <div class="absolute inset-0 pointer-events-none overflow-hidden" aria-hidden="true">
    <!-- Top-left warm blob -->
    <div class="absolute -top-32 -left-32 w-[500px] h-[500px] rounded-full bg-amber-300 opacity-20 blur-3xl"></div>
    <!-- Top-right orange blob -->
    <div class="absolute -top-16 right-0 w-[400px] h-[400px] rounded-full bg-orange-200 opacity-20 blur-3xl"></div>
    <!-- Center-left subtle blob -->
    <div class="absolute top-1/2 -left-24 w-[350px] h-[350px] rounded-full bg-amber-200 opacity-15 blur-3xl"></div>
    <!-- Bottom-right warm accent -->
    <div class="absolute bottom-0 right-1/4 w-[450px] h-[450px] rounded-full bg-orange-100 opacity-20 blur-3xl"></div>
  </div>

  <!-- Content -->
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-28">
    <div class="max-w-3xl">
      <!-- Tagline (Typewriter) -->
      <p
        class="animate-fade-in-up text-sm md:text-base font-semibold tracking-[0.25em] uppercase text-primary mb-6"
        aria-label="Hunde · Wissen · Verstand"
        id="hero-tagline"
      >
        <span id="hero-tagline-text">Hunde &middot; Wissen &middot; Verstand</span>
      </p>

      <!-- H1 (Hauptüberschrift mit Keyword) -->
      <h1 class="animate-fade-in-up delay-100 text-4xl md:text-5xl lg:text-6xl font-bold text-slate-900 leading-tight">
        Der Hundeblog, der Fakten <span class="text-primary">von Mythen trennt.</span>
      </h1>

      <!-- H2 (Keyword Rotation) -->
      <h2 class="animate-fade-in-up delay-150 mt-4 text-2xl md:text-3xl lg:text-4xl font-semibold text-slate-700 leading-tight">
        Fundiertes Wissen statt
        <span class="text-primary inline-block overflow-hidden align-bottom" id="hero-keyword-wrapper">
          <span id="hero-keyword" aria-live="polite"> Halbwahrheiten.</span>
        </span>
      </h2>

      <!-- Subtext -->
      <p class="animate-fade-in-up delay-200 mt-6 text-lg md:text-xl text-slate-600 leading-relaxed max-w-2xl">
        Evidenzbasierte Inhalte rund um Ernährung, Gesundheit, Erziehung und
        Pflege deines Hundes &ndash; verständlich aufbereitet und frei von
        Panikmache.
      </p>

      <!-- CTA Buttons -->
      <div class="animate-fade-in-up delay-300 mt-10 flex flex-col sm:flex-row gap-4">
        <a
          href="#beitraege"
          class="inline-flex items-center justify-center px-7 py-3.5 rounded-xl bg-primary text-white font-semibold text-base shadow-lg shadow-primary/25 hover:bg-primary-dark transition-colors duration-200"
        >
          Neuste Beiträge
          <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </a>
        <a
          href="#kategorien"
          class="inline-flex items-center justify-center px-7 py-3.5 rounded-xl border-2 border-primary text-primary font-semibold text-base hover:bg-primary hover:text-white transition-colors duration-200"
        >
          Themen entdecken
        </a>
      </div>
    </div>
  </div>

  <!-- Bottom fade into page -->
  <div class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-white to-transparent pointer-events-none"></div>
</section>

<script>
  let heroCleanup: (() => void) | null = null;

  function initHero() {
    // Vorherige Timer aufräumen
    if (heroCleanup) {
      heroCleanup();
      heroCleanup = null;
    }

    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) return;

    const taglineEl = document.getElementById('hero-tagline-text');
    const keywordEl = document.getElementById('hero-keyword');

    // Hero existiert nur auf der Startseite
    if (!taglineEl && !keywordEl) return;

    const timeouts: number[] = [];
    let rotationInterval: number | null = null;

    const safeTimeout = (fn: () => void, delay: number) => {
      const id = window.setTimeout(fn, delay);
      timeouts.push(id);
      return id;
    };

    // ===== TYPEWRITER EFFECT =====
    if (taglineEl) {
      const fullText = 'Hunde \u00b7 Wissen \u00b7 Verstand';
      taglineEl.textContent = '';
      taglineEl.classList.add('typewriter-cursor');
      taglineEl.classList.remove('typewriter-cursor-hidden');

      safeTimeout(() => {
        let i = 0;
        const typeChar = () => {
          if (i < fullText.length) {
            taglineEl.textContent += fullText[i];
            i++;
            const nextDelay = fullText[i - 1] === '\u00b7' ? 300 : 70;
            safeTimeout(typeChar, nextDelay);
          } else {
            safeTimeout(() => {
              taglineEl.classList.remove('typewriter-cursor');
              taglineEl.classList.add('typewriter-cursor-hidden');
            }, 800);
          }
        };
        typeChar();
      }, 700);
    }

    // ===== KEYWORD ROTATION =====
    if (keywordEl) {
      const words = [
        ' Halbwahrheiten.',
        ' Mythen.',
        ' Panikmache.',
        ' Fehlinformationen.',
      ];
      let currentIndex = 0;

      const rotateKeyword = () => {
        keywordEl.classList.add('keyword-rotate-out');

        safeTimeout(() => {
          currentIndex = (currentIndex + 1) % words.length;
          keywordEl.textContent = words[currentIndex];

          keywordEl.classList.remove('keyword-rotate-out');
          keywordEl.classList.add('keyword-rotate-in');

          safeTimeout(() => {
            keywordEl.classList.remove('keyword-rotate-in');
          }, 350);
        }, 350);
      };

      safeTimeout(() => {
        rotationInterval = window.setInterval(rotateKeyword, 3500);
      }, 3500);
    }

    // Cleanup-Funktion für Navigation weg von der Startseite
    heroCleanup = () => {
      timeouts.forEach((id) => clearTimeout(id));
      timeouts.length = 0;
      if (rotationInterval) {
        clearInterval(rotationInterval);
        rotationInterval = null;
      }
    };
  }

  document.addEventListener('astro:page-load', initHero);

  // Timer aufräumen wenn User weg navigiert
  document.addEventListener('astro:before-preparation', () => {
    if (heroCleanup) {
      heroCleanup();
      heroCleanup = null;
    }
  });
</script>
