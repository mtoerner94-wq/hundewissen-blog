---
// Hero section for Hundewissen mit Kopf homepage
---

<section class="relative min-h-[85vh] flex items-center overflow-hidden bg-gradient-to-b from-amber-50 via-secondary to-white">
  <!-- Animated Background -->
  <div class="absolute inset-0 pointer-events-none overflow-hidden" aria-hidden="true">

    <!-- Pfoten-Silhouetten -->
    <div class="hero-paw hero-paw-1">
      <svg viewBox="0 0 512 512" fill="#E8913A">
        <ellipse cx="256" cy="350" rx="110" ry="95"/>
        <ellipse cx="130" cy="200" rx="55" ry="65" transform="rotate(-10 130 200)"/>
        <ellipse cx="250" cy="150" rx="50" ry="62" transform="rotate(5 250 150)"/>
        <ellipse cx="370" cy="180" rx="52" ry="63" transform="rotate(10 370 180)"/>
        <ellipse cx="440" cy="270" rx="45" ry="58" transform="rotate(25 440 270)"/>
      </svg>
    </div>
    <div class="hero-paw hero-paw-2">
      <svg viewBox="0 0 512 512" fill="#fbbf24">
        <ellipse cx="256" cy="350" rx="110" ry="95"/>
        <ellipse cx="130" cy="200" rx="55" ry="65" transform="rotate(-10 130 200)"/>
        <ellipse cx="250" cy="150" rx="50" ry="62" transform="rotate(5 250 150)"/>
        <ellipse cx="370" cy="180" rx="52" ry="63" transform="rotate(10 370 180)"/>
        <ellipse cx="440" cy="270" rx="45" ry="58" transform="rotate(25 440 270)"/>
      </svg>
    </div>

    <!-- Wellen (3 Layer) -->
    <div class="hero-wave hero-wave-3">
      <svg viewBox="0 0 2400 120" preserveAspectRatio="none">
        <path fill="#E8913A" d="M0,60 C200,10 400,100 600,50 C800,0 1000,90 1200,60 C1400,30 1600,100 1800,50 C2000,0 2200,80 2400,60 L2400,120 L0,120Z"/>
      </svg>
    </div>
    <div class="hero-wave hero-wave-2">
      <svg viewBox="0 0 2400 120" preserveAspectRatio="none">
        <path fill="#C67520" d="M0,70 C150,30 350,90 600,60 C850,30 1050,80 1200,70 C1350,60 1550,20 1800,60 C2050,100 2200,40 2400,70 L2400,120 L0,120Z"/>
      </svg>
    </div>
    <div class="hero-wave hero-wave-1">
      <svg viewBox="0 0 2400 120" preserveAspectRatio="none">
        <path fill="#fbbf24" d="M0,50 C300,90 500,20 800,60 C1100,100 1300,30 1600,50 C1900,70 2100,40 2400,50 L2400,120 L0,120Z"/>
      </svg>
    </div>

    <!-- Laufende Hunde -->
    <div class="hero-dog hero-dog-1">
      <svg viewBox="0 0 120 80" fill="none">
        <g class="hero-dog-body">
          <ellipse cx="58" cy="38" rx="28" ry="14" fill="#C67520"/>
          <circle cx="90" cy="30" r="12" fill="#C67520"/>
          <ellipse cx="100" cy="33" rx="7" ry="5" fill="#E8913A"/>
          <circle cx="94" cy="28" r="2" fill="#1e293b"/>
          <ellipse cx="84" cy="21" rx="5" ry="8" fill="#a0622a" transform="rotate(-15 84 21)"/>
          <circle cx="106" cy="31" r="1.8" fill="#1e293b"/>
          <path class="hero-dog-tail" d="M30,32 Q20,18 16,12" stroke="#C67520" stroke-width="4" stroke-linecap="round" fill="none"/>
          <g class="hero-leg-fl"><line x1="78" y1="48" x2="78" y2="68" stroke="#C67520" stroke-width="4.5" stroke-linecap="round"/><ellipse cx="78" cy="70" rx="3.5" ry="2" fill="#a0622a"/></g>
          <g class="hero-leg-fr"><line x1="70" y1="48" x2="70" y2="68" stroke="#a0622a" stroke-width="4.5" stroke-linecap="round"/><ellipse cx="70" cy="70" rx="3.5" ry="2" fill="#8b5520"/></g>
          <g class="hero-leg-bl"><line x1="46" y1="48" x2="46" y2="68" stroke="#C67520" stroke-width="4.5" stroke-linecap="round"/><ellipse cx="46" cy="70" rx="3.5" ry="2" fill="#a0622a"/></g>
          <g class="hero-leg-br"><line x1="38" y1="48" x2="38" y2="68" stroke="#a0622a" stroke-width="4.5" stroke-linecap="round"/><ellipse cx="38" cy="70" rx="3.5" ry="2" fill="#8b5520"/></g>
        </g>
      </svg>
    </div>
    <div class="hero-dog hero-dog-2">
      <svg viewBox="0 0 110 75" fill="none">
        <g class="hero-dog-body">
          <ellipse cx="54" cy="36" rx="24" ry="12" fill="#E8913A"/>
          <circle cx="82" cy="28" r="10" fill="#E8913A"/>
          <ellipse cx="91" cy="31" rx="6" ry="4.5" fill="#fbbf24"/>
          <circle cx="86" cy="26" r="1.8" fill="#1e293b"/>
          <ellipse cx="76" cy="22" rx="4" ry="9" fill="#C67520" transform="rotate(-25 76 22)"/>
          <circle cx="96" cy="29" r="1.5" fill="#1e293b"/>
          <path class="hero-dog-tail" d="M30,30 Q22,16 24,8" stroke="#E8913A" stroke-width="3.5" stroke-linecap="round" fill="none"/>
          <g class="hero-leg-fl"><line x1="72" y1="44" x2="72" y2="62" stroke="#E8913A" stroke-width="4" stroke-linecap="round"/><ellipse cx="72" cy="64" rx="3" ry="1.8" fill="#C67520"/></g>
          <g class="hero-leg-fr"><line x1="65" y1="44" x2="65" y2="62" stroke="#C67520" stroke-width="4" stroke-linecap="round"/><ellipse cx="65" cy="64" rx="3" ry="1.8" fill="#a0622a"/></g>
          <g class="hero-leg-bl"><line x1="42" y1="44" x2="42" y2="62" stroke="#E8913A" stroke-width="4" stroke-linecap="round"/><ellipse cx="42" cy="64" rx="3" ry="1.8" fill="#C67520"/></g>
          <g class="hero-leg-br"><line x1="35" y1="44" x2="35" y2="62" stroke="#C67520" stroke-width="4" stroke-linecap="round"/><ellipse cx="35" cy="64" rx="3" ry="1.8" fill="#a0622a"/></g>
        </g>
      </svg>
    </div>

  </div>

  <!-- Content -->
  <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-28">
    <div class="max-w-3xl">
      <!-- Tagline (Typewriter) -->
      <p
        class="animate-fade-in-up text-sm md:text-base font-semibold tracking-[0.25em] uppercase text-primary mb-6"
        aria-label="Hunde · Wissen · Verstand"
        id="hero-tagline"
      >
        <span id="hero-tagline-text">Hunde &middot; Wissen &middot; Verstand</span>
      </p>

      <!-- H1 (Hauptüberschrift mit Keyword) -->
      <h1 class="animate-fade-in-up delay-100 text-4xl md:text-5xl lg:text-6xl font-bold text-slate-900 leading-tight">
        Der Hundeblog, der Fakten <span class="text-primary">von Mythen trennt.</span>
      </h1>

      <!-- H2 (Keyword Rotation) -->
      <h2 class="animate-fade-in-up delay-150 mt-4 text-2xl md:text-3xl lg:text-4xl font-semibold text-slate-700 leading-tight">
        Fundiertes Wissen statt
        <span class="text-primary inline-block overflow-hidden align-bottom" id="hero-keyword-wrapper">
          <span id="hero-keyword" aria-live="polite"> Halbwahrheiten.</span>
        </span>
      </h2>

      <!-- Subtext -->
      <p class="animate-fade-in-up delay-200 mt-6 text-lg md:text-xl text-slate-600 leading-relaxed max-w-2xl">
        Evidenzbasierte Inhalte rund um Ernährung, Gesundheit, Erziehung und
        Pflege deines Hundes &ndash; verständlich aufbereitet und frei von
        Panikmache.
      </p>

      <!-- CTA Buttons -->
      <div class="animate-fade-in-up delay-300 mt-10 flex flex-col sm:flex-row gap-4">
        <a
          href="#beitraege"
          class="inline-flex items-center justify-center px-7 py-3.5 rounded-xl bg-primary text-white font-semibold text-base shadow-lg shadow-primary/25 hover:bg-primary-dark transition-colors duration-200"
        >
          Neuste Beiträge
          <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </a>
        <a
          href="#kategorien"
          class="inline-flex items-center justify-center px-7 py-3.5 rounded-xl border-2 border-primary text-primary font-semibold text-base hover:bg-primary hover:text-white transition-colors duration-200"
        >
          Themen entdecken
        </a>
      </div>
    </div>
  </div>

  <!-- Bottom fade into page -->
  <div class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-white to-transparent pointer-events-none"></div>
</section>

<script>
  let heroCleanup: (() => void) | null = null;

  function initHero() {
    // Vorherige Timer aufräumen
    if (heroCleanup) {
      heroCleanup();
      heroCleanup = null;
    }

    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) return;

    const taglineEl = document.getElementById('hero-tagline-text');
    const keywordEl = document.getElementById('hero-keyword');

    // Hero existiert nur auf der Startseite
    if (!taglineEl && !keywordEl) return;

    const timeouts: number[] = [];
    let rotationInterval: number | null = null;

    const safeTimeout = (fn: () => void, delay: number) => {
      const id = window.setTimeout(fn, delay);
      timeouts.push(id);
      return id;
    };

    // ===== TYPEWRITER EFFECT =====
    if (taglineEl) {
      const fullText = 'Hunde \u00b7 Wissen \u00b7 Verstand';
      taglineEl.textContent = '';
      taglineEl.classList.add('typewriter-cursor');
      taglineEl.classList.remove('typewriter-cursor-hidden');

      safeTimeout(() => {
        let i = 0;
        const typeChar = () => {
          if (i < fullText.length) {
            taglineEl.textContent += fullText[i];
            i++;
            const nextDelay = fullText[i - 1] === '\u00b7' ? 300 : 70;
            safeTimeout(typeChar, nextDelay);
          } else {
            safeTimeout(() => {
              taglineEl.classList.remove('typewriter-cursor');
              taglineEl.classList.add('typewriter-cursor-hidden');
            }, 800);
          }
        };
        typeChar();
      }, 700);
    }

    // ===== KEYWORD ROTATION =====
    if (keywordEl) {
      const words = [
        ' Halbwahrheiten.',
        ' Mythen.',
        ' Panikmache.',
        ' Fehlinformationen.',
      ];
      let currentIndex = 0;

      const rotateKeyword = () => {
        keywordEl.classList.add('keyword-rotate-out');

        safeTimeout(() => {
          currentIndex = (currentIndex + 1) % words.length;
          keywordEl.textContent = words[currentIndex];

          keywordEl.classList.remove('keyword-rotate-out');
          keywordEl.classList.add('keyword-rotate-in');

          safeTimeout(() => {
            keywordEl.classList.remove('keyword-rotate-in');
          }, 350);
        }, 350);
      };

      safeTimeout(() => {
        rotationInterval = window.setInterval(rotateKeyword, 3500);
      }, 3500);
    }

    // Cleanup-Funktion für Navigation weg von der Startseite
    heroCleanup = () => {
      timeouts.forEach((id) => clearTimeout(id));
      timeouts.length = 0;
      if (rotationInterval) {
        clearInterval(rotationInterval);
        rotationInterval = null;
      }
    };
  }

  document.addEventListener('astro:page-load', initHero);

  // Timer aufräumen wenn User weg navigiert
  document.addEventListener('astro:before-preparation', () => {
    if (heroCleanup) {
      heroCleanup();
      heroCleanup = null;
    }
  });
</script>
